# 28. 最佳实践

## 可维护性

什么是可维护性高的代码：

- `容易理解`：无须求助原始开发者，任何人一看代码就知道它是干什么的，以及它是怎么实现的。
- `符合常识`：代码中的一切都显得顺理成章，无论操作有多么复杂。
- `容易适配`：即使数据发生变化也不用完全重写。
- `容易扩展`：代码架构经过认真设计，支持未来扩展核心功能。
- `容易调试`：出问题时，代码可以给出明确的信息，通过它能直接定位问题。

1. **编码规范**

- 可读性 - 什么时候需要写注释
  - 函数和方法
  - 大型代码块
  - 复杂的算法
  - 使用黑科技
- 变量和函数命名
  - 变量名应该是名词
  - 函数名应该以动词开始
  - 对变量和函数都使用符合逻辑的名称，不用担心长度
  - 变量、函数和方法应该以小写字母开头
- 变量类型透明化 - 变量定义时就通过某种方式指明变量的值类型

2. **松散耦合**

- 解耦 HTML/JavaScript - 将 HTML 和 JS 尽量分开，减少他们之间的混合
- 解耦 CSS/JavaScript - 同上，比如使用 JS 操作类，而不是操作 CSS 的每个属性
- 解耦应用程序逻辑/事件处理程序 - 事件处理和业务逻辑分开

## 优化 DOM 交互

1. 实时更新最小化

比如 DOM 操作时借助 createDocumentFragment 合并 DOM 操作

2. 使用 innerHTML

创建新 DOM 节点的方式有两种：1）使用 DOM 方法如 createElement()和 appendChild()、2）使用 innerHTML

大量 DOM 更新时方法 2 更快，这是因为`在给 innerHTML 赋值时，后台会创建 HTML 解析器，然后会使用原生 DOM 调用而不是 JavaScript的 DOM 方法来创建 DOM 结构。原生 DOM 方法速度更快，因为该方法是执行编译代码而非解释代码。`

3. 使用事件委托

4. 注意 HTMLCollection

只要访问 HTMLCollection，无论是它的属性还是方法，就会触发查询文档，而这个查询相当耗时。可采取的方法比如`把length提前保存在单独的变量中`。

以下情形会返回 HTMLCollection：

- 调用 getElementsByTagName()；
- 读取元素的 childNodes 属性；
- 读取元素的 attributes 属性；
- 访问特殊集合，如 document.form、document.images 等。
